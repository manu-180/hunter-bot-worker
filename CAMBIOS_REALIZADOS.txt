=============================================================================
‚úÖ CAMBIOS REALIZADOS - Domain Hunter Worker con m√°s logs
=============================================================================

PROBLEMA IDENTIFICADO:
- El bot ya estaba habilitado (bot_enabled = true)
- Solo se ve√≠an logs del LeadSniper (bot que manda emails)
- NO se ve√≠an logs del Domain Hunter (bot que busca dominios)
- El horario terminaba a las 19:00, muy temprano

CAMBIOS REALIZADOS:
=============================================================================

1. ‚è∞ HORARIO EXTENDIDO (de 19:00 a 20:00)
   ----------------------------------------
   Archivos modificados:
   - domain_hunter_worker.py (l√≠nea 48): BUSINESS_HOURS_END = 20
   - main.py (l√≠nea 36): BUSINESS_HOURS_END = 20
   
   Ahora el bot trabajar√° hasta las 8 PM en vez de 7 PM.

2. üìä LOGS MEJORADOS - Domain Hunter Worker
   ------------------------------------------
   Archivos modificados:
   - domain_hunter_worker.py
   
   Logs agregados:
   
   a) Al iniciar el worker:
      - Versi√≥n del c√≥digo (fingerprint)
      - Hora actual en Argentina y UTC
      - Estado del horario laboral
      - URLs de Supabase
      - Total de nichos, pa√≠ses, ciudades disponibles
   
   b) En cada iteraci√≥n del loop:
      - Banner visual separando iteraciones
      - Consulta a Supabase con resultado
      - Lista de usuarios encontrados con sus nichos
      - Hora actual detallada
      - Estado del horario laboral en cada check
   
   c) Al procesar cada usuario:
      - Banner con datos del usuario
      - Nicho, pa√≠s, ciudades configuradas
      - Cada dominio encontrado (primeros 5)
      - Confirmaci√≥n de guardado en Supabase
      - Delays entre b√∫squedas
   
   d) En cada b√∫squeda de SerpAPI:
      - Query exacta que se env√≠a
      - P√°gina actual
      - Resultados devueltos
      - Hora exacta del call (auditor√≠a de cr√©ditos)

3. üöÄ LOGS MEJORADOS - Start Workers
   -----------------------------------
   Archivos modificados:
   - start_workers.py
   
   Logs agregados:
   - Versi√≥n del manager
   - PIDs de ambos workers
   - Mensaje de qu√© hace cada worker
   - Separadores visuales

4. üîç LOGS DE ENTRY POINT
   ------------------------
   Agregado al final de domain_hunter_worker.py:
   - Print muy visible cuando el script se ejecuta
   - Timestamp UTC
   - Detecci√≥n de ambiente (Railway vs Local)

=============================================================================
C√ìMO VERIFICAR QUE FUNCIONA
=============================================================================

1. Hacer commit y push a Railway:
   
   git add .
   git commit -m "Add extensive logging to domain hunter worker"
   git push origin main

2. En Railway, esperar el deploy (2-3 minutos)

3. Ir a los logs y buscar:
   
   ‚úÖ Debe aparecer:
   - "üöÄüöÄüöÄ DOMAIN HUNTER WORKER - ENTRY POINT REACHED"
   - "üîç DOMAIN HUNTER WORKER - Iniciando"
   - "üîñ VERSION: horario_extended_v3"
   - "üìä ESTADO ACTUAL: ‚úÖ DENTRO de horario laboral"
   - "üë• X usuario(s) con bot activo"
   - "üîç Consultando Supabase por usuarios con bot_enabled=true..."

   ‚ùå Si NO aparece:
   - El domain_hunter_worker.py no se est√° ejecutando
   - Revisar que el Procfile tenga: worker: python start_workers.py
   - Revisar que start_workers.py est√© iniciando ambos workers

4. Verificar que est√° buscando dominios:
   
   En los logs debe aparecer cada 60 segundos:
   - "üîÑ Nueva iteraci√≥n del loop principal"
   - "üéØ Procesando usuario: XXXXX..."
   - "üîç Iniciando b√∫squeda de dominios..."
   - "üí∞ SERPAPI CALL: hora Argentina XX:XX"
   - "‚úÖ Encontrados X dominios v√°lidos"

5. Verificar en Supabase que se est√°n agregando dominios:
   
   SELECT domain, status, created_at
   FROM leads
   WHERE user_id = '38152119-7da4-442e-9826-20901c65f42e'
   ORDER BY created_at DESC
   LIMIT 20;

=============================================================================
HORARIOS DE FUNCIONAMIENTO
=============================================================================

ANTES: 8:00 - 19:00 (hora Argentina)
AHORA: 8:00 - 20:00 (hora Argentina)

Fuera de horario:
- El bot se pausa para ahorrar cr√©ditos de SerpAPI
- Se muestra: "‚è∏Ô∏è FUERA DE HORARIO LABORAL"
- Revisa cada 5 minutos si ya es hora de trabajar

=============================================================================
ESTRUCTURA DE LOGS EN RAILWAY
=============================================================================

Deber√≠as ver algo como esto:

[DOMAIN-HUNTER] üöÄüöÄüöÄ DOMAIN HUNTER WORKER - ENTRY POINT REACHED
[DOMAIN-HUNTER] üîç DOMAIN HUNTER WORKER - Iniciando
[DOMAIN-HUNTER] ‚úÖ SerpAPI configurada
[DOMAIN-HUNTER] üîñ VERSION: horario_extended_v3
[DOMAIN-HUNTER] üïê HORA ACTUAL: Argentina=15:30 | UTC=18:30
[DOMAIN-HUNTER] ‚úÖ DENTRO de horario laboral
[DOMAIN-HUNTER] ======================================
[DOMAIN-HUNTER] üîÑ Nueva iteraci√≥n del loop principal
[DOMAIN-HUNTER] ======================================
[DOMAIN-HUNTER] üîç Consultando Supabase por usuarios...
[DOMAIN-HUNTER] ‚úÖ 1 usuario(s) con bot activo:
[DOMAIN-HUNTER]    - Usuario: 38152119... | Nicho: gimnasios
[DOMAIN-HUNTER] üéØ Procesando usuario: 38152119...
[DOMAIN-HUNTER] üîç Iniciando b√∫squeda de dominios...
[DOMAIN-HUNTER] üí∞ SERPAPI CALL: hora Argentina 15:30
[DOMAIN-HUNTER] ‚úÖ Encontrados 15 dominios v√°lidos:
[DOMAIN-HUNTER]    1. gimnasiofit.com.ar
[DOMAIN-HUNTER]    2. powerfit.com.ar
[DOMAIN-HUNTER]    ...
[DOMAIN-HUNTER] üíæ Guardando 15 dominios en Supabase...
[DOMAIN-HUNTER] ‚úÖ Dominios guardados correctamente

[LEADSNIPER] üí§ Heartbeat: 0 pendientes, 8 en cola

=============================================================================
SOLUCI√ìN SI NO APARECEN LOGS DEL DOMAIN HUNTER
=============================================================================

Si despu√©s del deploy solo ves logs de [LEADSNIPER] y NO de [DOMAIN-HUNTER]:

1. El start_workers.py no est√° iniciando ambos workers correctamente
2. El domain_hunter_worker.py est√° crasheando al inicio

Soluci√≥n:
- Revisar los logs de Railway al inicio del deploy
- Buscar errores de Python
- Verificar que las variables de entorno est√©n configuradas:
  - SUPABASE_URL
  - SUPABASE_KEY
  - SERPAPI_KEY

=============================================================================
PR√ìXIMOS PASOS
=============================================================================

1. ‚úÖ Hacer commit de los cambios
2. ‚úÖ Push a Railway
3. ‚úÖ Esperar deploy (2-3 minutos)
4. ‚úÖ Verificar logs en Railway
5. ‚úÖ Confirmar que aparecen logs de [DOMAIN-HUNTER]
6. ‚úÖ Verificar en Supabase que se agregan dominios nuevos

=============================================================================
