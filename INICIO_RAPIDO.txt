================================================================================
üöÄ GU√çA DE INICIO R√ÅPIDO - DIAGN√ìSTICO DEL BOT
================================================================================

Si tu bot NO est√° recopilando dominios, sigue estos pasos:

================================================================================
PASO 1: Generar reporte autom√°tico de tu base de datos
================================================================================

En la terminal, ejecuta:

  python generar_reporte_db.py

Esto crear√° un archivo 'reporte_db_{timestamp}.txt' con TODA la informaci√≥n
de tu base de datos: configuraciones, tracking, leads, logs, etc.

‚è±Ô∏è  Tiempo: 10 segundos

================================================================================
PASO 2: Revisar el reporte y identificar el problema
================================================================================

Abre el archivo generado y busca la secci√≥n "6. VERIFICACI√ìN DE SALUD DEL SISTEMA"

Esto te dir√° exactamente qu√© est√° mal:

  ‚úÖ Bot habilitado: 1 usuario(s)
  ‚ùå SERPAPI_KEY NO configurada en .env  <-- PROBLEMA ENCONTRADO
  ‚úÖ Tracking activo: 15 combinaciones
  ‚ùå Dominios recientes: NINGUNO en las √∫ltimas 24h

‚è±Ô∏è  Tiempo: 1 minuto

================================================================================
PASO 3: Ejecutar diagn√≥stico SQL completo (opcional)
================================================================================

Si quieres ver los datos directamente en Supabase:

1. Ir a Supabase SQL Editor
2. Abrir el archivo: diagnostico_bot.sql
3. Copiar TODO el contenido
4. Pegar en SQL Editor
5. Ejecutar

Esto te mostrar√°:
  - Usuarios con bot activo
  - Estado del tracking
  - Dominios en la base de datos
  - Logs del bot
  - Estad√≠sticas globales

‚è±Ô∏è  Tiempo: 2 minutos

================================================================================
PASO 4: Aplicar la soluci√≥n correspondiente
================================================================================

Basado en el problema encontrado, ejecuta la soluci√≥n en Supabase SQL Editor:

PROBLEMA: Bot NO habilitado
SOLUCI√ìN:
  -- Reemplazar 'TU_USER_ID' con tu user_id real
  UPDATE hunter_configs 
  SET bot_enabled = true
  WHERE user_id = 'TU_USER_ID';

----

PROBLEMA: Falta SERPAPI_KEY
SOLUCI√ìN:
  1. Ir a https://serpapi.com/
  2. Crear cuenta (plan gratuito: 100 b√∫squedas/mes)
  3. Copiar tu API Key
  4. Agregar al archivo .env:
     SERPAPI_KEY=tu_serpapi_key_aqui

----

PROBLEMA: Tracking agotado
SOLUCI√ìN:
  DELETE FROM domain_search_tracking WHERE user_id = 'TU_USER_ID';

----

PROBLEMA: Worker no est√° corriendo
SOLUCI√ìN:
  # En la terminal 1:
  python domain_hunter_worker.py

  # En la terminal 2:
  python main.py

‚è±Ô∏è  Tiempo: 5 minutos

================================================================================
PASO 5: Verificar que funcione
================================================================================

Opci√≥n A - Usando el script Python:
  
  python generar_reporte_db.py

  # Abrir el nuevo reporte y buscar:
  # "‚úÖ Dominios recientes: X en las √∫ltimas 24h"

Opci√≥n B - Usando SQL:
  
  SELECT domain, status, created_at
  FROM leads
  WHERE user_id = 'TU_USER_ID'
  ORDER BY created_at DESC
  LIMIT 20;

Deber√≠as ver dominios nuevos apareciendo.

‚è±Ô∏è  Tiempo: 2 minutos

================================================================================
üìä C√ìMO OBTENER TU USER_ID
================================================================================

Si no sabes tu user_id, ejecuta en Supabase SQL Editor:

  SELECT id as user_id, email
  FROM auth.users
  ORDER BY created_at DESC;

Copia el 'id' de tu usuario.

================================================================================
üîç SOLUCI√ìN EXPRESS (si tienes prisa)
================================================================================

Ejecuta estos comandos en Supabase SQL Editor:

  -- 1. Ver tu user_id
  SELECT id as user_id, email FROM auth.users;

  -- 2. Activar bot (reemplaza USER_ID)
  UPDATE hunter_configs 
  SET bot_enabled = true 
  WHERE user_id = 'PEGA_TU_USER_ID_AQUI';

  -- 3. Resetear tracking
  DELETE FROM domain_search_tracking 
  WHERE user_id = 'PEGA_TU_USER_ID_AQUI';

  -- 4. Verificar
  SELECT 
    (SELECT bot_enabled FROM hunter_configs WHERE user_id = 'PEGA_TU_USER_ID_AQUI') as bot_activo,
    (SELECT COUNT(*) FROM leads WHERE user_id = 'PEGA_TU_USER_ID_AQUI') as total_leads;

Luego:
  1. Verifica que .env tenga SERPAPI_KEY
  2. Ejecuta: python domain_hunter_worker.py
  3. Espera 1-2 minutos
  4. Verifica que se agreguen dominios

‚è±Ô∏è  Tiempo total: 3 minutos

================================================================================
üìÅ ARCHIVOS DISPONIBLES
================================================================================

1. generar_reporte_db.py
   - Script Python que genera un reporte completo autom√°tico
   - Ejecutar: python generar_reporte_db.py

2. diagnostico_bot.sql
   - Queries SQL para ver toda la informaci√≥n en Supabase
   - Ejecutar en Supabase SQL Editor

3. soluciones_bot.sql
   - Comandos SQL para solucionar problemas comunes
   - Copiar y pegar en Supabase SQL Editor

4. DIAGNOSTICO_BOT_README.txt
   - Gu√≠a completa con explicaciones detalladas
   - Leer para entender c√≥mo funciona el sistema

5. INICIO_RAPIDO.txt
   - Este archivo (pasos r√°pidos)

================================================================================
‚ùì PREGUNTAS FRECUENTES
================================================================================

P: ¬øPor qu√© mi bot no est√° recopilando dominios?

R: Las causas m√°s comunes son (en orden):
   1. Bot no habilitado (bot_enabled = false)
   2. Falta SERPAPI_KEY en .env
   3. Worker no est√° corriendo (domain_hunter_worker.py)
   4. Tracking agotado (todas las combinaciones exhausted)
   5. SerpAPI sin cr√©ditos

----

P: ¬øDebo correr los 2 workers?

R: S√ç. Necesitas 2 terminales:
   - Terminal 1: domain_hunter_worker.py (recopila dominios)
   - Terminal 2: main.py (procesa dominios y env√≠a emails)

----

P: ¬øCu√°ntos dominios deber√≠a estar agregando?

R: Con SerpAPI plan gratuito (100 b√∫squedas/mes):
   - ~60-120 dominios por mes
   - ~2-4 dominios por d√≠a

----

P: ¬øC√≥mo s√© si el bot est√° funcionando?

R: Ejecuta:
   python generar_reporte_db.py
   
   Busca en el reporte:
   "‚úÖ Dominios recientes: X en las √∫ltimas 24h"
   
   Si X > 0, el bot est√° funcionando.

----

P: ¬øPuedo cambiar el nicho que busca el bot?

R: El bot tiene ROTACI√ìN AUTOM√ÅTICA entre 50+ nichos, 17 pa√≠ses, 
   y 100+ ciudades. No necesitas configurar nada manualmente.
   
   Si quieres forzar un nicho espec√≠fico, edita hunter_configs:
   
   UPDATE hunter_configs 
   SET nicho = 'tu_nicho', pais = 'tu_pais'
   WHERE user_id = 'TU_USER_ID';

================================================================================
üÜò AYUDA ADICIONAL
================================================================================

Si despu√©s de seguir todos los pasos el bot TODAV√çA no funciona:

1. Revisa los logs del worker en la terminal:
   - ¬øMuestra errores?
   - ¬øDice "SerpAPI key not configured"?
   - ¬øDice "No hay usuarios con bot habilitado"?

2. Revisa los logs en la base de datos:
   SELECT * FROM hunter_logs 
   WHERE user_id = 'TU_USER_ID' 
   ORDER BY created_at DESC 
   LIMIT 50;

3. Verifica cr√©ditos de SerpAPI:
   https://serpapi.com/dashboard

4. Revisa el archivo DIAGNOSTICO_BOT_README.txt para m√°s detalles

================================================================================

üí° TIP: Si ejecutas 'python generar_reporte_db.py' peri√≥dicamente,
    puedes ver el progreso del bot en tiempo real.

================================================================================
