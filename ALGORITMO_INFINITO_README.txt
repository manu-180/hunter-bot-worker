â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸš€ ALGORITMO DE BÃšSQUEDA "CASI INFINITO" - IMPLEMENTACIÃ“N COMPLETA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Este documento explica el nuevo sistema de bÃºsqueda masiva de dominios que puede
generar MILLONES de combinaciones sin repetir.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“Š NÃšMEROS DEL SISTEMA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… NICHOS: 120 (expandido desde 50)
   - Servicios profesionales (20)
   - Servicios locales (25)
   - ConstrucciÃ³n y mantenimiento (15)
   - Retail y comercio (20)
   - GastronomÃ­a (20)
   - Salud y bienestar (20)
   - EducaciÃ³n y capacitaciÃ³n (15)
   - Turismo y hotelerÃ­a (15)
   - Eventos y entretenimiento (12)
   - Industria y producciÃ³n (15)
   - Agricultura y ganaderÃ­a (10)
   - Transporte y logÃ­stica (12)
   - TecnologÃ­a y comunicaciones (10)
   - Servicios financieros y seguros (8)
   - Automotor (10)
   - DecoraciÃ³n y hogar (10)
   - Mascotas y animales (8)
   - Flores y jardinerÃ­a (8)

âœ… PAÃSES: 17 paÃ­ses latinoamericanos (sin Brasil por idioma)
   - Argentina (primero - ~350 ciudades)
   - MÃ©xico (~300 ciudades)
   - Colombia (~200 ciudades)
   - Chile (~150 ciudades)
   - PerÃº (~150 ciudades)
   - Ecuador (~100 ciudades)
   - Venezuela (~80 ciudades)
   - Bolivia (~80 ciudades)
   - Paraguay (~60 ciudades)
   - Uruguay (~50 ciudades)
   - RepÃºblica Dominicana (~60 ciudades)
   - Guatemala (~50 ciudades)
   - Honduras (~40 ciudades)
   - Nicaragua (~40 ciudades)
   - Costa Rica (~40 ciudades)
   - PanamÃ¡ (~40 ciudades)
   - El Salvador (~40 ciudades)

âœ… CIUDADES: ~2,100 ciudades en total

âœ… COMBINACIONES TOTALES:
   120 nichos Ã— 2,100 ciudades = 252,000 combinaciones

âœ… PÃGINAS POR COMBINACIÃ“N: ~3 pÃ¡ginas promedio (hasta agotar)
   252,000 combinaciones Ã— 3 pÃ¡ginas = 756,000 bÃºsquedas totales

âœ… DOMINIOS POTENCIALES:
   756,000 bÃºsquedas Ã— 5 dominios promedio = 3,780,000 dominios Ãºnicos

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ¯ ESTRATEGIA DE PROGRESIÃ“N (CLAVE DEL SISTEMA)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

El bot sigue una estrategia SECUENCIAL y EXHAUSTIVA para nunca repetir hasta
completar TODO el ciclo:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. NICHO ACTUAL: "inmobiliarias"                                            â”‚
â”‚    â”œâ”€ 2. PAÃS ACTUAL: "Argentina"                                           â”‚
â”‚    â”‚  â”œâ”€ 3. CIUDAD: Buenos Aires                                            â”‚
â”‚    â”‚  â”‚  â”œâ”€ PÃ¡gina 0 (resultados 1-20)                                      â”‚
â”‚    â”‚  â”‚  â”œâ”€ PÃ¡gina 1 (resultados 21-40)                                     â”‚
â”‚    â”‚  â”‚  â”œâ”€ PÃ¡gina 2 (resultados 41-60)                                     â”‚
â”‚    â”‚  â”‚  â””â”€ âœ… 0 resultados â†’ AGOTADA, siguiente ciudad                     â”‚
â”‚    â”‚  â”œâ”€ 3. CIUDAD: CÃ³rdoba                                                 â”‚
â”‚    â”‚  â”œâ”€ 3. CIUDAD: Rosario                                                 â”‚
â”‚    â”‚  â”œâ”€ ...                                                                â”‚
â”‚    â”‚  â””â”€ 3. CIUDAD: Ushuaia (Ãºltima de Argentina)                          â”‚
â”‚    â”‚      â””â”€ âœ… CompletÃ³ Argentina â†’ Siguiente paÃ­s                         â”‚
â”‚    â”œâ”€ 2. PAÃS: "MÃ©xico"                                                     â”‚
â”‚    â”‚  â”œâ”€ 3. CIUDAD: Ciudad de MÃ©xico                                        â”‚
â”‚    â”‚  â”œâ”€ ...                                                                â”‚
â”‚    â”‚  â””â”€ 3. CIUDAD: CancÃºn (Ãºltima de MÃ©xico)                              â”‚
â”‚    â”œâ”€ 2. PAÃS: "Colombia"                                                   â”‚
â”‚    â”œâ”€ ...                                                                   â”‚
â”‚    â””â”€ 2. PAÃS: "El Salvador" (Ãºltimo paÃ­s)                                 â”‚
â”‚       â””â”€ âœ… CompletÃ³ todos los paÃ­ses â†’ Siguiente nicho                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. NICHO: "estudios contables"                                              â”‚
â”‚    â”œâ”€ 2. PAÃS: "Argentina" (reinicia desde primer paÃ­s)                    â”‚
â”‚    â”‚  â”œâ”€ 3. CIUDAD: Buenos Aires                                            â”‚
â”‚    â”‚  â”œâ”€ ...                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

CLAVE: El bot NO salta aleatoriamente entre nichos/paÃ­ses. Completa TODO un
paÃ­s antes de pasar al siguiente, y TODOS los paÃ­ses antes de cambiar de nicho.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ§  LÃ“GICA INTELIGENTE DE AGOTAMIENTO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ANTES (problema): Marcaba como agotada despuÃ©s de 1 bÃºsqueda sin resultados
AHORA (mejor): Da 3 intentos antes de marcar como agotada

PseudocÃ³digo:

    if dominios_encontrados == 0:
        if pagina_actual >= 2:  # Ya probamos pÃ¡ginas 0, 1, 2
            â†’ Marcar como AGOTADA
            â†’ Rotar a siguiente ciudad/paÃ­s/nicho
        else:  # Primer o segundo intento
            â†’ Incrementar pÃ¡gina
            â†’ Dar otra chance

Esto evita descartar combinaciones productivas prematuramente.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”„ VARIACIÃ“N DE QUERIES (PARA EVITAR DUPLICADOS)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Cada pÃ¡gina usa un MODIFICADOR diferente para obtener resultados variados:

PÃ¡gina 0: "inmobiliarias en Buenos Aires"
PÃ¡gina 1: "inmobiliarias Buenos Aires contacto"
PÃ¡gina 2: "inmobiliarias profesionales Buenos Aires"
PÃ¡gina 3: "empresas de inmobiliarias Buenos Aires"
PÃ¡gina 4: "inmobiliarias en Buenos Aires" (vuelve a empezar el ciclo)

Esto aumenta la variedad de resultados y reduce duplicados.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ›¡ï¸ FILTROS AVANZADOS (PARA CALIDAD)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

El bot aplica 9 validaciones a cada dominio encontrado:

1. âŒ Google Maps links (/maps/)
2. âŒ Caracteres invÃ¡lidos ([]{}\|% etc)
3. âŒ Sin TLD (.com, .ar, etc)
4. âŒ Palabras de prueba (test, demo, example)
5. âŒ Blacklist expandida (50+ dominios genÃ©ricos)
6. âŒ Dominios gubernamentales (.gob., .gov., .mil., .edu.ar)
7. âŒ Nombres muy cortos (<3 caracteres antes del TLD)
8. âŒ Plataformas gratuitas (blogspot, wix, etc)
9. âŒ Emails mal formateados

Solo pasan dominios REALES de negocios.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“ ARCHIVOS MODIFICADOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. ğŸ†• cities_data.py
   - Nuevo archivo con 2,100 ciudades organizadas
   - Categorizado por paÃ­s
   - Argentina primero, resto por poblaciÃ³n

2. âœï¸  domain_hunter_worker.py
   - NICHOS expandido de 50 â†’ 120
   - Import de cities_data.py
   - _create_next_combination() mejorado (progresiÃ³n secuencial)
   - LÃ³gica de agotamiento inteligente (3 intentos)
   - VariaciÃ³n de queries por pÃ¡gina

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸš€ DEPLOYMENT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Subir cambios a Railway:
   
   git add .
   git commit -m "Algoritmo infinito: 120 nichos Ã— 2,100 ciudades"
   git push origin main

2. Railway detectarÃ¡ los cambios y re-deployarÃ¡ automÃ¡ticamente

3. Verificar logs en Railway:
   - Buscar: "Base de ciudades cargada: 17 paÃ­ses, 2100 ciudades"
   - Buscar: "ProgresiÃ³n: Siguiente ciudad en..."

4. Resetear tracking existente (OPCIONAL):

   -- Borrar combinaciones viejas (opcional)
   DELETE FROM domain_search_tracking
   WHERE user_id = '38152119-7da4-442e-9826-20901c65f42e';

   -- El bot crearÃ¡ automÃ¡ticamente desde cero

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“Š MONITOREO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Ver progresiÃ³n en tiempo real:

-- Combinaciones activas
SELECT
    nicho,
    ciudad,
    pais,
    current_page,
    total_domains_found,
    is_exhausted,
    last_searched_at
FROM domain_search_tracking
WHERE user_id = '38152119-7da4-442e-9826-20901c65f42e'
ORDER BY last_searched_at DESC NULLS LAST
LIMIT 10;

-- EstadÃ­sticas globales
SELECT
    COUNT(*) as total_combinaciones,
    COUNT(*) FILTER (WHERE is_exhausted = false) as activas,
    COUNT(*) FILTER (WHERE is_exhausted = true) as agotadas,
    SUM(total_domains_found) as total_dominios_encontrados,
    COUNT(DISTINCT nicho) as nichos_unicos,
    COUNT(DISTINCT pais) as paises_unicos,
    COUNT(DISTINCT ciudad) as ciudades_unicas
FROM domain_search_tracking
WHERE user_id = '38152119-7da4-442e-9826-20901c65f42e';

-- Ver Ãºltimo nicho/paÃ­s/ciudad procesados
SELECT
    nicho,
    pais,
    ciudad,
    current_page,
    last_searched_at
FROM domain_search_tracking
WHERE user_id = '38152119-7da4-442e-9826-20901c65f42e'
  AND last_searched_at IS NOT NULL
ORDER BY last_searched_at DESC
LIMIT 1;

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âš ï¸  CONSIDERACIONES IMPORTANTES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. COSTOS DE SERPAPI:
   - 756,000 bÃºsquedas totales estimadas
   - A $5 por 1,000 bÃºsquedas = $3,780 total
   - DistribuciÃ³n sugerida en tiempo:
     * 1,000 bÃºsquedas/dÃ­a = 2.5 aÃ±os para completar ciclo
     * 5,000 bÃºsquedas/dÃ­a = 5 meses para completar ciclo
     * 10,000 bÃºsquedas/dÃ­a = 2.5 meses para completar ciclo

2. RATE LIMITS:
   - SerpAPI: 100 bÃºsquedas/segundo (no es problema)
   - Supabase: 100 requests/segundo (no es problema)
   - Delay configurado: 4-8 segundos entre bÃºsquedas

3. TIEMPO DE EJECUCIÃ“N:
   - Con delay de 6s promedio = 10 bÃºsquedas/minuto = 600/hora
   - 756,000 bÃºsquedas Ã· 600/hora = 1,260 horas = 52 dÃ­as de ejecuciÃ³n continua

4. DUPLICADOS:
   - El constraint UNIQUE(user_id, domain) en la tabla leads previene duplicados
   - Si un dominio ya existe, simplemente se ignora

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ‰ RESUMEN FINAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… Sistema configurado para generar 252,000 combinaciones Ãºnicas
âœ… 756,000 bÃºsquedas estimadas antes de repetir
âœ… ~3,780,000 dominios potenciales
âœ… ProgresiÃ³n inteligente: ciudad â†’ paÃ­s â†’ nicho â†’ loop infinito
âœ… Filtros avanzados para dominios de calidad
âœ… Argentina primero, Brasil excluido
âœ… Sin repeticiones hasta completar ciclo completo
âœ… Sistema auto-gestionado (crea combinaciones sobre la marcha)

ğŸš€ El bot ahora es imparable. Puede correr 24/7 durante MESES sin repetir.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“ SOPORTE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Si el bot se detiene o hay problemas:

1. Verificar logs en Railway
2. Verificar SERPAPI_KEY tiene crÃ©ditos
3. Verificar bot_enabled = true en hunter_configs
4. Consultar este documento para entender la lÃ³gica

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Creado: 2026-02-06
VersiÃ³n: 2.0 - ALGORITMO INFINITO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
